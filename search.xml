<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>WT&amp;VScode</title>
      <link href="/2025/06/05/WT-VScode/"/>
      <url>/2025/06/05/WT-VScode/</url>
      
        <content type="html"><![CDATA[<blockquote><p>如何让windows terminal像VScode中嵌入的tcommandline一样使用code命令</p></blockquote><h3 id="前言">前言</h3><p>VS Code 远程连接服务器后，可以通过<code>code</code>命令实现打开文件，文件夹，打开新窗口等，这些功能对于一个不擅长<code>Vim</code>的人非常实用。</p><p>比如当我通过commandline进入到了指定目录，当我想查看目录中的某个文件内容时，可以通过cat / vim来实现，但它们都或多或少存在可读性及易用性的问题。<br>而若我们通过code命令打开文件，则可以通过本地的vs code查看该文件，很方便。</p><p>然而，由于vs code自带的commandline嵌入在客户端里面，使用起来不如一个独立的terminal方便，因此实际上平时导航目录，查看文件，多还是另外再开一些terminal去实现的。</p><p>但这些terminal， 如 windows terminal 并不能在连接远程后通过code命令打开vs code 客户端查看文件或者打开文件夹。</p><p>因此，本文通过总结google上的一些搜索结果，找到一条可以用windows terminal实现code命令的方法。</p><h3 id="准备工作">准备工作</h3><p>想要通过code命令将远程vscode server与本地vscode client联动起来，还需要先通过ssh让彼此连接上，也就是在vs code中使用remote ssh连接远程主机。</p><p>本文提供一个可以通过terminal连接远程主机的思路：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code --remote ssh-remote+remote_server /code/my_project</span><br><span class="line"><span class="comment"># e.g. code --remote ssh-remote+&lt;user&gt;@&lt;server&gt;:&lt;port&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>reference : <a href="https://code.visualstudio.com/docs/remote/troubleshooting#_connect-to-a-remote-host-from-the-terminal">https://code.visualstudio.com/docs/remote/troubleshooting#_connect-to-a-remote-host-from-the-terminal</a></p></blockquote><h3 id="实现code命令">实现<code>code</code>命令</h3><h6 id="code脚本"><code>code</code>脚本</h6><ol><li><code>vim code.sh</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Zsh to Bash conversion notes:</span></span><br><span class="line"><span class="comment"># 1. Replaced zsh-specific glob modifiers (*oc[1]N) with ls/stat for timestamp sorting</span></span><br><span class="line"><span class="comment"># 2. Changed local variable declarations to use standard Bash syntax</span></span><br><span class="line"><span class="comment"># 3. Replaced array indexing and pattern matching with Bash equivalents</span></span><br><span class="line"><span class="comment"># 4. Added nullglob behavior manually using conditional checks</span></span><br><span class="line"><span class="comment"># 5. Used parameter expansion instead of zsh-specific syntax</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find the latest VSCode server node process by modification time</span></span><br><span class="line">vscode_servers=(<span class="string">&quot;<span class="variable">$HOME</span>&quot;</span>/.vscode-server/cli/servers/*/server/node)</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;#vscode_servers[@]&#125;</span> -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># Also check the legacy .vscodeserver directory if .vscode-server is empty</span></span><br><span class="line">    vscode_servers=(<span class="string">&quot;<span class="variable">$HOME</span>&quot;</span>/.vscodeserver/cli/servers/*/server/node)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$&#123;#vscode_servers[@]&#125;</span> -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;VSCode remote server directory not found&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find the most recently modified server directory</span></span><br><span class="line">latest_server=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> server <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;vscode_servers[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="variable">$server</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [[ -z <span class="variable">$latest_server</span> ]] || [[ <span class="variable">$server</span> -nt <span class="variable">$latest_server</span> ]]; <span class="keyword">then</span></span><br><span class="line">            latest_server=<span class="variable">$server</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="variable">$latest_server</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;VSCode remote server process not found&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">node_process=<span class="variable">$latest_server</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find the running server process</span></span><br><span class="line">our_process=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> IFS= <span class="built_in">read</span> -r line; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$line</span> == *<span class="string">&quot;<span class="variable">$node_process</span>&quot;</span>* &amp;&amp; <span class="variable">$line</span> == *<span class="string">&quot;start-server&quot;</span>* ]]; <span class="keyword">then</span></span><br><span class="line">        our_process=<span class="variable">$line</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> &lt; &lt;(ps ux)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="variable">$our_process</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Running VSCode server not found&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extract PID from the process info</span></span><br><span class="line">our_pid=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$our_process</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="variable">$our_pid</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;PID for VSCode server could not be found&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find the socket associated with the PID</span></span><br><span class="line">our_socket=$(ss -lx -p -s | grep <span class="string">&quot;pid=<span class="variable">$our_pid</span>&quot;</span> | grep <span class="string">&quot;\.sock&quot;</span> | <span class="built_in">head</span> -n1)</span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="variable">$our_socket</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;VSCode IPC socket not found&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extract socket path from output</span></span><br><span class="line">socket_path=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$our_socket</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="variable">$socket_path</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;VSCode IPC socket path could not be extracted&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Trim the &quot;/node&quot; string from the node_process path</span></span><br><span class="line">base_process=<span class="variable">$&#123;node_process%&quot;/node&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Execute with the appropriate environment variable</span></span><br><span class="line">VSCODE_IPC_HOOK_CLI=<span class="string">&quot;<span class="variable">$socket_path</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;base_process&#125;</span>/bin/remote-cli/code&quot;</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br></pre></td></tr></table></figure><h6 id="添加到bashrc">添加到bashrc</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 设为可执行文件</span></span><br><span class="line"><span class="built_in">chmod</span> +x code.sh</span><br><span class="line"><span class="comment"># 2. 添加别名并写入bashrc</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="built_in">alias</span> code=/path/to/code.sh</span><br></pre></td></tr></table></figure><h6 id="测试">测试</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code -v</span><br><span class="line">code -h</span><br></pre></td></tr></table></figure><h3 id="如何使用？">如何使用？</h3><ol><li>确保有一个vs code client连接上了目标主机</li><li>在terminal直接使用code命令，可以打开新的窗口，也可以查看文件</li></ol><h3 id="后记">后记</h3><p>再记录一些 <code>code</code> 常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">code -r . <span class="comment">#在当前目录打开,并重用窗口</span></span><br><span class="line">code -n . <span class="comment">#在当前目录打开，并使用新的窗口</span></span><br><span class="line">code file <span class="comment">#查看文件</span></span><br><span class="line">code -d file1 file2 <span class="comment">#比较两个文件的差异</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tmux手册</title>
      <link href="/2025/05/23/tmux%E6%89%8B%E5%86%8C/"/>
      <url>/2025/05/23/tmux%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>tmux命令及配置备忘</p></blockquote><h4 id="tmux-conf配置">.tmux.conf配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -g mouse on</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在不同面板间切换，改为vim风格</span></span><br><span class="line"><span class="built_in">bind</span> h select-pane -L</span><br><span class="line"><span class="built_in">bind</span> j select-pane -D</span><br><span class="line"><span class="built_in">bind</span> k select-pane -U</span><br><span class="line"><span class="built_in">bind</span> l select-pane -R</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># set prefix to Ctrl A</span></span><br><span class="line">set-option -g prefix C-a</span><br><span class="line">unbind-key C-a</span><br><span class="line">bind-key C-a send-prefix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Prefix and Ctrl N to new window</span></span><br><span class="line"><span class="built_in">bind</span> -n C-n  new-window</span><br><span class="line"><span class="comment"># Prefix and Ctrl W to close window</span></span><br><span class="line"><span class="built_in">bind</span> -n C-w kill-pane</span><br><span class="line"></span><br><span class="line"><span class="comment"># Shift arrow to switch windows</span></span><br><span class="line"><span class="built_in">bind</span> -n S-Left previous-window</span><br><span class="line"><span class="built_in">bind</span> -n S-Right next-window</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set easier window split keys prefix first</span></span><br><span class="line">bind-key v split-window -h</span><br><span class="line">bind-key h split-window -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># Easy config reload prefix first</span></span><br><span class="line">bind-key r source-file ~/.tmux.conf \; display-message <span class="string">&quot;tmux.conf reloaded&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定快捷键 Alt+O，在当前窗口中切换不同的面板布局（平铺、堆叠等）</span></span><br><span class="line"><span class="built_in">bind</span> -n C-l next-layout</span><br><span class="line"></span><br><span class="line"><span class="comment"># B 将当前面板拆分为一个新的窗口</span></span><br><span class="line"><span class="built_in">bind</span> B break-pane</span><br></pre></td></tr></table></figure><h4 id="常用命令">常用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># new session</span></span><br><span class="line">tmux new -s mysession</span><br><span class="line"></span><br><span class="line"><span class="comment"># attach to a session with name</span></span><br><span class="line">tmux a -t mysession</span><br><span class="line"></span><br><span class="line"><span class="comment"># attach to last session</span></span><br><span class="line">tmux a</span><br><span class="line"></span><br><span class="line"><span class="comment"># show all session</span></span><br><span class="line">tmux <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># kill all session</span></span><br><span class="line">tmux kill-session -a</span><br></pre></td></tr></table></figure><h4 id="窗口">窗口</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C-n <span class="comment">#新建窗口</span></span><br><span class="line">C-a + , <span class="comment"># 重命名窗口</span></span><br><span class="line">S-Left / S-Right <span class="comment">#q</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tmux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker代理</title>
      <link href="/2025/05/07/docker%E4%BB%A3%E7%90%86/"/>
      <url>/2025/05/07/docker%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>docker代理与系统代理不一致的问题，因此需要在docker配置文件中配置代理，并且代理为系统级</p></blockquote><p>参考：</p><p><a href="https://zhuanlan.zhihu.com/p/1041557640">https://zhuanlan.zhihu.com/p/1041557640</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chisel使用</title>
      <link href="/2025/03/16/chisel%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/03/16/chisel%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>chisel是A fast TCP/UDP tunnel over HTTP， 使用HTTP传输的快速TCP/UDP隧道。</p></blockquote><h3 id="简单应用">简单应用</h3><p><img src="https://s2.loli.net/2025/03/16/FnNVx81O4qavSAg.jpg" alt="img"></p><h4 id="例子">例子</h4><blockquote><p>Background: 内网只开放了22端口以及8080，并且以http服务的形式开放出来，需要vpn才能连接，并且为容器环境，仅数据目录能持久化</p></blockquote><p>内网端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chisel server -p 9999 --reverse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开放该服务后，会生成一个http链接，假设为</span></span><br><span class="line"><span class="comment"># url = https://example.com/proxy/9999/</span></span><br></pre></td></tr></table></figure><p>外网端:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使内网可以访问互联网</span></span><br><span class="line">chisel client <span class="variable">$url</span> R:7890:127.0.0.1:7890   <span class="comment">#7890为本机代理端口</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使内网ssh服务可以通过访问外网服务器连接 &lt;不用再通过http网页访问&gt;</span></span><br><span class="line">chisel client <span class="variable">$url</span> 1234:127.0.0.1:22</span><br></pre></td></tr></table></figure><h3 id="容器中创建用户">容器中创建用户</h3><ol><li>容器中的/home目录通常没有持久化，因此在新建用户时需要将目录放到挂载磁盘上</li><li>容器中的/etc等目录同样没有持久化，因此当容器重启后，用户便会消失，因此需要每次重启容器时重新创建用户</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼ 用户配置 ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼</span></span><br><span class="line">USERNAME=<span class="string">&quot;user&quot;</span></span><br><span class="line">USER_UID=<span class="string">&quot;1001&quot;</span></span><br><span class="line">USER_GID=<span class="string">&quot;1001&quot;</span></span><br><span class="line">USER_PASSWORD=<span class="string">&quot;xxxxxx&quot;</span>   <span class="comment"># 符合复杂度要求的密码</span></span><br><span class="line">USER_HOME=<span class="string">&quot;/data/home/<span class="variable">$USERNAME</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户组（确保组名和GID一致）</span></span><br><span class="line"><span class="keyword">if</span> ! getent group <span class="variable">$USERNAME</span> &gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;正在创建用户组 <span class="variable">$USERNAME</span> (GID: <span class="variable">$USER_GID</span>)...&quot;</span></span><br><span class="line">    sudo groupadd -g <span class="variable">$USER_GID</span> <span class="variable">$USERNAME</span> || &#123; <span class="built_in">echo</span> <span class="string">&quot;[错误] 无法创建用户组&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制删除旧用户（避免残留冲突）</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">id</span> -u <span class="variable">$USERNAME</span> &gt;/dev/null 2&gt;&amp;1; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;删除旧用户 <span class="variable">$USERNAME</span>...&quot;</span></span><br><span class="line">    sudo userdel -rf <span class="variable">$USERNAME</span> || &#123; <span class="built_in">echo</span> <span class="string">&quot;[错误] 无法删除旧用户&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建新用户</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;创建用户 <span class="variable">$USERNAME</span> (UID: <span class="variable">$USER_UID</span>)...&quot;</span></span><br><span class="line">sudo useradd \</span><br><span class="line">    --uid <span class="variable">$USER_UID</span> \</span><br><span class="line">    --gid <span class="variable">$USER_GID</span> \</span><br><span class="line">    --home-dir <span class="string">&quot;<span class="variable">$USER_HOME</span>&quot;</span> \</span><br><span class="line">    --shell /bin/bash \</span><br><span class="line">    --create-home \</span><br><span class="line">    <span class="variable">$USERNAME</span> || &#123; <span class="built_in">echo</span> <span class="string">&quot;[错误] 无法创建用户&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置密码（使用加密哈希）</span></span><br><span class="line">ENCRYPTED_PASS=$(openssl passwd -6 <span class="string">&quot;<span class="variable">$USER_PASSWORD</span>&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$USERNAME</span>:<span class="variable">$ENCRYPTED_PASS</span>&quot;</span> | sudo chpasswd -e || &#123; <span class="built_in">echo</span> <span class="string">&quot;[错误] 密码设置失败&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修复权限</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;设置目录权限: <span class="variable">$USER_HOME</span>&quot;</span></span><br><span class="line">sudo <span class="built_in">chown</span> -R <span class="variable">$USERNAME</span>:<span class="variable">$USERNAME</span> <span class="string">&quot;<span class="variable">$USER_HOME</span>&quot;</span></span><br><span class="line">sudo <span class="built_in">chmod</span> 755 <span class="string">&quot;<span class="variable">$USER_HOME</span>&quot;</span></span><br><span class="line"><span class="comment"># ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲ 配置结束 ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲</span></span><br></pre></td></tr></table></figure><p>将以上脚本想办法放到一个容器重启时便会执行的bash脚本中，从而使得它能够在容器启动时重启。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>windows</title>
      <link href="/2025/03/04/windows/"/>
      <url>/2025/03/04/windows/</url>
      
        <content type="html"><![CDATA[<blockquote><p>win10 / win11 相关内容</p></blockquote><h3 id="延长更新">延长更新</h3><blockquote><p>转载自 <a href="https://blog.csdn.net/m0_71338372/article/details/132144271">https://blog.csdn.net/m0_71338372/article/details/132144271</a></p></blockquote><ol><li><p>win+r,输入regedit</p></li><li><p>进入以下路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UX\Settings</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/03/04/9ZwcxelvQKzADh7.png" alt="在这里插入图片描述"></p></li><li><p>右键新建文件DWORD(32)并命名为：FlightSettingsMaxPauseDays</p></li></ol><p><img src="https://s2.loli.net/2025/03/04/cEYI1zbOvkro5mC.png" alt="在这里插入图片描述"></p><ol start="4"><li>双击文件FlightSettingsMaxPauseDays更改数值数据为：999，基数为16进制，并确定</li></ol><p><img src="https://s2.loli.net/2025/03/04/jakHMCUY4AqBot7.png" alt="在这里插入图片描述"></p><ol start="5"><li><p>找到电脑设置，进入Windows更新，选择暂停更新351周</p><p><img src="https://s2.loli.net/2025/03/04/RZaEz7Bukt3LfHM.png" alt="在这里插入图片描述"></p></li></ol><h3 id="uestc网络认证">uestc网络认证</h3><blockquote><p>我连接了UESTC-WiFi，但无法自动弹出认证页面 ，如何处理？</p></blockquote><p>无法自动弹出认证页面，有可能是因为DNS设置错误，需将您的本机设置为自动获取DNS，获取到的DNS应为202.112.14.21或202.112.14.11。</p><p>如果DNS设置正确，还是不能正常弹出认证页面，请打开浏览器，直接访问IP地址：10.253.0.213。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>如何从应用商店Microsoft Store免费下载安装HEVC视频扩展插件</title>
      <link href="/2025/01/11/%E5%A6%82%E4%BD%95%E4%BB%8E%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97Microsoft-Store%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85HEVC%E8%A7%86%E9%A2%91%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6/"/>
      <url>/2025/01/11/%E5%A6%82%E4%BD%95%E4%BB%8E%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97Microsoft-Store%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85HEVC%E8%A7%86%E9%A2%91%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自CSDN，<a href="https://blog.csdn.net/ywd1992/article/details/137456359">https://blog.csdn.net/ywd1992/article/details/137456359</a></p></blockquote><p>在电脑上打开一张HEIC类型的图片提示缺少HEVC解码器，无法打开查看，现象如下：</p><img src="https://s2.loli.net/2025/01/11/DORkGMi671Wthgr.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>这种情况一般会提示我们需要下载安装HEVC解码器，点击“立即下载并安装”会跳转到应用商店，但是我们发现需要付费7元才能下载安装</p><img src="https://s2.loli.net/2025/01/11/M2GEcDbt7ZRyBwK.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>免费安装的方法：</p><p>1、浏览器打开以下链接，点击页面上的安装按钮，会跳转到应用商店，此时我们可以看到在商店的顶端提示“此应用在你的设备上将无法工作”，不用管这个提示。<br><a href="https://apps.microsoft.com/detail/9N4WGH0Z6VHQ?hl=zh-cn&amp;gl=cn">https://apps.microsoft.com/detail/9N4WGH0Z6VHQ?hl=zh-cn&amp;gl=cn</a></p><img src="https://s2.loli.net/2025/01/11/oaN1fDVXm47lGyH.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>2、复制并在浏览器中打开以下链接<br><a href="https://store.rg-adguard.net/">https://store.rg-adguard.net/</a></p><img src="https://s2.loli.net/2025/01/11/8P5Bw6MIraZpmez.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>3、回到刚刚打开的应用商店，点击分享按钮，复制链接</p><img src="https://s2.loli.net/2025/01/11/4FpeqQOaLJKsiwf.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>4、将复制到的链接填写到刚才打开的网站的输入框内，点击前往，点击结果中的第二个下载安装包</p><img src="https://s2.loli.net/2025/01/11/zeVb3T5UtSwGRhK.png" alt="在这里插入图片描述" style="zoom: 50%;" /><img src="https://s2.loli.net/2025/01/11/xlsjpog5A24zdFk.png" alt="在这里插入图片描述" style="zoom:67%;" /><p><strong>注意，若是浏览器无法下载可选择用迅雷等其他下载器下载。</strong></p><p>5、安装刚才下载到的安装包</p><img src="https://s2.loli.net/2025/01/11/KUNbXv5QmEZAwaD.png" alt="在这里插入图片描述" style="zoom:67%;" /><p>6、再次打开heic格式的图片，已经可以正常显示了</p><img src="https://s2.loli.net/2025/01/11/QHDgazOuUdeC6n9.png" alt="在这里插入图片描述" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 瞎搞 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微软store </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wsl刷流</title>
      <link href="/2025/01/11/wsl%E5%88%B7%E6%B5%81/"/>
      <url>/2025/01/11/wsl%E5%88%B7%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>想尝试BT自动刷流，发现github有一个一直在维护的项目，故clone下来部署，发现由于熟练度原因，依然存在一堆问题。</p></blockquote><h2 id="链接">链接</h2><p><a href="https://github.com/lipssmycode/byrbt_bot">https://github.com/lipssmycode/byrbt_bot</a></p><h2 id="引言">引言</h2><p>部署该项目正常来说我们需要满足以下条件：</p><ul><li>有一个教育网ipv6的机器。</li><li>操作系统为linux，安装了docker以及docker compose</li><li>硬盘大小1T以上（optional）</li></ul><p>对我来说，第二点不太现实，因为linux系统少了很多办公必备的东西（word,ppt等），考虑到windows有wsl，故尝试用wsl来部署该项目，但实际上用wsl会存在不少问题，先总结如下：</p><ul><li>wsl默认情况下只有ipv4地址，ipv6为局域网地址 -&gt; 需要设置网络镜像（wsl新功能，win11才有貌似）</li><li>wsl需要前台一直运行，当我们将终端或者vs code关闭后，系统就进入休眠了 -&gt; （利用vbs实现后台运行）</li></ul><h2 id="实践">实践</h2><h3 id="部署及运行">部署及运行</h3><ol><li><p>配置config/config.ini，只需要修改byrbt账户名称和密码</p></li><li><p>配置docker-compose.yml，改动点基本上就是downloads目录的映射，以及为构建的镜像加一个tag</p></li><li><p>运行脚本start_bot_by_docker.sh即可</p></li><li><p>停止</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CURRENT_PUID=$(<span class="built_in">id</span> -u)</span><br><span class="line"><span class="built_in">export</span> CURRENT_PGID=$(<span class="built_in">id</span> -g)</span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure></li></ol><h3 id="wsl网络模式">wsl网络模式</h3><ol><li><p>在wsl种用ipa addr检查当前ip地址，会发现eth0存在v4以及v6地址，但v6地址为局域网地址，只与本机相同</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wsl ip</span></span><br><span class="line"> inet 172.23.212.182/20</span><br><span class="line"> inet6 fe80::215:5dff:fe01:6500/64 scope lin</span><br><span class="line"><span class="comment"># windows ip</span></span><br><span class="line">本地链接 IPv6 地址. . . . . . . . : fe80::c309:9361:74d6:a657%8</span><br><span class="line">IPv4 地址 . . . . . . . . . . . . : 10.11.0.xxx</span><br></pre></td></tr></table></figure></li><li><p>为此，我们需要更改wsl的网络模式</p><ul><li><p>在user目录下创建<code>.wslconfig</code></p></li><li><p>添加内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[wsl2]</span><br><span class="line">networkingMode=mirrored</span><br><span class="line">dnsTunneling=<span class="literal">true</span></span><br><span class="line">firewal=<span class="literal">true</span></span><br><span class="line">autoProxy=<span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>重启</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br><span class="line">ubuntu</span><br></pre></td></tr></table></figure></li></ul></li><li><p>重新查看ip，可以发现多了一个inet6的地址，即为成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">inet 113.54.128.214/21 brd 113.54.135.255 scope global noprefixroute eth0</span><br><span class="line">inet6 240c:c983:4::2:83c4/128 scope global nodad noprefixroute</span><br><span class="line">inet6 fe80::275:21af:7292:d9a4/64 scope <span class="built_in">link</span> nodad noprefixroute</span><br></pre></td></tr></table></figure></li><li><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -6 ipw.cn</span><br></pre></td></tr></table></figure></li></ol><h3 id="wsl自启动">wsl自启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># win+r -&gt; shell:startup</span><br><span class="line">#文件名: wsl.vbs</span><br><span class="line">set ws=wscript.CreateObject(&quot;wscript.shell&quot;)</span><br><span class="line">ws.run &quot;wsl -d Ubuntu&quot;, 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本地自部署Overleaf</title>
      <link href="/2025/01/08/%E6%9C%AC%E5%9C%B0%E8%87%AA%E9%83%A8%E7%BD%B2Overleaf/"/>
      <url>/2025/01/08/%E6%9C%AC%E5%9C%B0%E8%87%AA%E9%83%A8%E7%BD%B2Overleaf/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自<a href="https://www.cnblogs.com/Undefined443/p/18155463">https://www.cnblogs.com/Undefined443/p/18155463</a> and <a href="https://www.yuisblog.com/archives/258/">https://www.yuisblog.com/archives/258/</a></p></blockquote><h2 id="部署-Overleaf">部署 Overleaf</h2><blockquote><p>注意：本教程只适用于 macOS / Linux 操作系统。如果需要在 Windows 上部署 Overleaf，请先<a href="https://learn.microsoft.com/zh-cn/windows/wsl/install">安装 WSL</a>，之后在 WSL 中部署 Overleaf。</p></blockquote><ol><li><p>安装 Docker。</p></li><li><p>克隆 Overleaf Toolkit 仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/overleaf/toolkit.git overleaf-toolkit</span><br></pre></td></tr></table></figure></li><li><p>进入 <code>overleaf-toolkit</code> 目录并生成配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> overleaf-toolkit</span><br><span class="line">bin/init</span><br></pre></td></tr></table></figure></li><li><p>下载 Overleaf 映像并创建容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/up</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>注意，Overleaf 脚本中使用的命令行工具均为 GNU 版本，而 macOS 原装命令行工具为 BSD 版本。因此 Mac 用户在启动时会报错。请使用 Homebrew 安装相应工具的 GNU 版本（如 <code>coreutils</code>），然后再尝试安装。</p></blockquote><ol start="5"><li><p>接下来让 Overleaf 容器在后台运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/start</span><br></pre></td></tr></table></figure></li><li><p>Overleaf 容器启动之后，可以打开 <a href="http://localhost/launchpad">http://localhost/launchpad</a> 注册管理员帐户。之后我们就可以用这个帐户登录 Overleaf 平台。</p></li></ol><h2 id="安装宏包">安装宏包</h2><p>Overleaf 映像自带的宏包很少，为了编译我们的 LaTeX 文档，往往需要安装其他宏包。</p><ol><li><p>在<strong>容器运行</strong>的状态下进入容器 Shell：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/shell</span><br></pre></td></tr></table></figure></li><li><p>更新并安装全部宏包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用中科大镜像源</span></span><br><span class="line">tlmgr option repository https://mirrors.aliyun.com/CTAN/systems/texlive/tlnet</span><br><span class="line"><span class="comment"># 更新已安装的全部宏包，包括 tlmgr 自身</span></span><br><span class="line">tlmgr update --self --all</span><br><span class="line"><span class="comment"># 安装 scheme-full 套件（CTAN 上的全部宏包）</span></span><br><span class="line">tlmgr install scheme-full</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>⚠️: 安装全部宏包的时间大约要 40 分钟左右</p></blockquote><ol start="3"><li><p>安装依赖包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install ttf-mscorefonts-installer  <span class="comment"># 安装 Windows 字体</span></span><br><span class="line">apt install inkscape python3-pygments  <span class="comment"># 安装 TikZ &amp; Syntax highlighter 依赖</span></span><br><span class="line">apt install -y latex-cjk-all texlive-lang-chinese texlive-lang-english</span><br><span class="line">apt install -y xfonts-wqy</span><br><span class="line"><span class="comment"># 导入 TeX Live 字体</span></span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/texlive/2024/texmf-var/fonts/conf/texlive-fontconfig.conf /etc/fonts/conf.d/09-texlive.conf</span><br><span class="line">fc-cache -fsv  <span class="comment"># 刷新字体缓存</span></span><br></pre></td></tr></table></figure></li><li><p>你可能还要安装一些中文字体，可以通过下面的命令将你的字体目录 <code>fonts</code> 拷贝到 Overleaf 容器的字体目录：</p><ul><li><p>打开windows/fonts目录，并打包所有字体，这里假设我们上传的文字文件压缩包为 <code>winfonts.tar.gz</code>，我们可以打开 shell 到上传路径并运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">cp</span> winfonts.tar.gz sharelatex:/usr/local/share</span><br></pre></td></tr></table></figure></li><li><p>之后我们对 <code>winfonts.tar.gz</code> 进行解压并且移动到系统目录中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf winfonts.tar.gz</span><br><span class="line"><span class="built_in">mv</span> winfonts /usr/share/fonts/</span><br></pre></td></tr></table></figure></li><li><p>最后我们到 <code>usr/share/fonts/winfonts</code> 目录中开始安装我们的字体：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/share/fonts/winfonts</span><br><span class="line">$ mkfontscale</span><br><span class="line">$ mkfontdir</span><br><span class="line">$ fc-cache -fv</span><br></pre></td></tr></table></figure></li><li><p>安装完成后我们可以通过指令查看已经安装的中文字体</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fc-list :lang=zh-cn</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="XeLaTex-修复">XeLaTex 修复</h2><p>由于官方提供的 XeLaTex 镜像是破损的（或者说是不能用的），这个在<a href="https://github.com/overleaf/overleaf/issues/837">官方的 Github Issue</a> 中也有提到，所以我们需要进入容器对其进行修复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install -y texlive-xetex texlive-latex-extra texlive-science</span><br></pre></td></tr></table></figure><h2 id="刻录镜像">刻录镜像</h2><p>将容器刻录成镜像，防止重启重建时需要再次重新安装 TexLive 完整版：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> config/version <span class="comment"># 查看版本</span></span><br><span class="line">docker commit sharelatex sharelatex/sharelatex:[version]-with-texlive-full</span><br><span class="line"><span class="built_in">echo</span> [version]-with-texlive-full &gt; config/version <span class="comment">#[version]通过config/version查看</span></span><br></pre></td></tr></table></figure><h2 id="Troubleshooting">Troubleshooting</h2><p><strong>无法安装宏包</strong></p><p>在安装宏包时你可能遇到如下错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tlmgr: Local TeX Live (2023) is older than remote repository (2024).</span><br><span class="line">Cross release updates are only supported with</span><br><span class="line">  update-tlmgr-latest(.sh/.exe) --update</span><br><span class="line">See https://tug.org/texlive/upgrade.html <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure><p>这是映像使用的 TeX Live 版本过低导致的。如果你当前使用的不是最新的 ShareLaTeX 映像，可以使用下面的命令更新映像：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/upgrade</span><br></pre></td></tr></table></figure><p>如果你已经在使用最新的 ShareLaTeX 映像，那说明官方还没有给最新的 TeX Live 打映像。你可以设置 TeX Live 使用旧版镜像源，或者更新当前容器中的 TeX Live 版本，也可以自己打一个包含新版 TeX Live 的映像。</p><ul><li><p>设置旧版镜像源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tlmgr option repository https://mirrors.tuna.tsinghua.edu.cn/tex-historic-archive/systems/texlive/2021/tlnet-final/</span><br></pre></td></tr></table></figure></li><li><p>如果你要更新当前容器中的 TeX Live 版本，参见：<a href="https://www.cnblogs.com/Undefined443/p/18156668">Linux 更新 TeX Live</a></p></li><li><p>如果你要自己打映像，参见：<a href="https://www.cnblogs.com/Undefined443/p/18156113">自制 ShareLaTeX 映像</a>。</p></li></ul><p><strong>打开 Web 界面时遇到 502 错误</strong></p><p>如果遇到 502 错误，可能是端口冲突导致的。进入 <code>config/overleaf.rc</code> 修改一下端口号：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OVERLEAF_PORT=8080</span><br></pre></td></tr></table></figure><p><strong>部署到服务器上之后无法访问</strong></p><p>Overleaf 的默认监听端口是 <code>127.0.0.1:80</code>，也就是只监听来自本地的 HTTP 访问请求。如果要开放所有 IP 的访问请求，需要修改 <code>config/overleaf.rc</code> 设置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OVERLEAF_LISTEN_IP=0.0.0.0</span><br><span class="line">OVERLEAF_PORT=80</span><br></pre></td></tr></table></figure><p>这样所有地址都可以访问服务器的 80 端口来获取 Overleaf 服务。</p><p><strong>无法启动 ShareLaTeX 容器</strong></p><p>如果你在运行 <code>bin/up</code> 的过程中遇到这样的错误提示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Initiating Mongo replica <span class="built_in">set</span>...</span><br><span class="line">Rebranding from ShareLaTeX to Overleaf</span><br><span class="line">  Starting with Overleaf CE and Server Pro version 5.0.0 the environment variables will use the Overleaf brand.</span><br><span class="line">  Previous versions used the ShareLaTeX brand <span class="keyword">for</span> environment variables.</span><br><span class="line">  Your config/variables.env has 60 entries matching <span class="string">&#x27;OVERLEAF_&#x27;</span>, expected prefix <span class="string">&#x27;SHARELATEX_&#x27;</span>.</span><br><span class="line">  Please align your config/version with the naming scheme of variables <span class="keyword">in</span> config/variables.env.</span><br></pre></td></tr></table></figure><p>说明当前配置设置的 Overleaf 版本过低。我们需要使用大版本号为 5 以上的版本。</p><p>编辑 <code>config/version</code>，使用新的版本号替代旧的版本号。你可以在 Docker Hub 上查看最新的版本号：<a href="https://hub.docker.com/r/sharelatex/sharelatex/tags">sharelatex | DockerHub</a></p><p>撰写本文时，最新的版本号为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.0.3</span><br></pre></td></tr></table></figure><p><strong>无法启动 Mongo 容器</strong></p><p>如果你在 WSL / macOS 上运行 <code>bin/up</code> 命令时遇到如下错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MongoNetworkError: connect ECONNREFUSED 127.0.0.1:27017</span><br><span class="line">Waiting for Mongo...</span><br><span class="line"></span><br><span class="line">Please configure ALL_TEX_LIVE_DOCKER_IMAGES in /home/xiao/toolkit/config/variables.env</span><br><span class="line"></span><br><span class="line">You can read more about configuring Sandboxed Compiles in our documentation:</span><br><span class="line">  https://github.com/overleaf/overleaf/wiki/Server-Pro:-sandboxed-compiles#changing-the-texlive-image</span><br></pre></td></tr></table></figure><p>这可能是由于 Mongo 访问绑定挂载目录的 <a href="https://github.com/docker-library/docs/blob/master/mongo/content.md#where-to-store-data">bug</a> 导致的。要解决这个问题，我们需要将 Mongo 和 Redis 的数据存储位置由绑定挂载目录改为命名卷。方法为：创建 <code>config/docker-compose.override.yml</code> 文件，填入以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建卷</span></span><br><span class="line">volumes:</span><br><span class="line">  mongo-data:</span><br><span class="line">  redis-data:</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载卷</span></span><br><span class="line">services:</span><br><span class="line">  mongo:</span><br><span class="line">    volumes:</span><br><span class="line">      - mongo-data:/data/db</span><br><span class="line"></span><br><span class="line">  redis:</span><br><span class="line">    volumes:</span><br><span class="line">      - redis-data:/data</span><br></pre></td></tr></table></figure><p>然后重新运行 <code>bin/up</code>。</p>]]></content>
      
      
      <categories>
          
          <category> 写作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Overleaf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git常用命令</title>
      <link href="/2024/12/06/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/12/06/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>平时用git除了同步外，还有其他常用命令，在此记录备忘</p></blockquote><h3 id="从本地另一个分支拉取某个文件夹">从本地另一个分支拉取某个文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout target-branch -- path/to/folder</span><br></pre></td></tr></table></figure><h3 id="从当前分支创建新分支">从当前分支创建新分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b new-branch-name</span><br></pre></td></tr></table></figure><h3 id="仅切换分支">仅切换分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout target-branch</span><br></pre></td></tr></table></figure><h3 id="merge远程分支">merge远程分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull origin/target-branch</span><br><span class="line">git merge origin/target-branch</span><br></pre></td></tr></table></figure><h3 id="merge时忽略对某个文件夹得更改">merge时忽略对某个文件夹得更改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git merge origin/target-branch</span><br><span class="line">git checkout -- path/to/folder</span><br></pre></td></tr></table></figure><h3 id="修改远程仓库URL">修改远程仓库URL</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">git remote set-url origin 新的仓库地址</span><br><span class="line"><span class="comment"># git remote set-url origin user@ip:port/path/to/folder</span></span><br></pre></td></tr></table></figure><h3 id="服务器间clone">服务器间clone</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> ssh://user@remoteip:port/path/floder</span><br></pre></td></tr></table></figure><h3 id="其他">其他</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ask gpt is all you need</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模型组实验室服务器使用及维护</title>
      <link href="/2024/10/31/%E6%A8%A1%E5%9E%8B%E7%BB%84%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8%E5%8F%8A%E7%BB%B4%E6%8A%A4/"/>
      <url>/2024/10/31/%E6%A8%A1%E5%9E%8B%E7%BB%84%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8%E5%8F%8A%E7%BB%B4%E6%8A%A4/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="e6931bcffbbe401c4fbd67132c57b5258528bd8d332ce0936a5fab33359c35cc">6059b5ffff8dec11a381a20d7c9946916adcdb8c599a393e132a48eb19991f5324cc397f0e25c3ea84615ac9035d856219008c6f5bc31513cca4f172efd1ceff7d641354c49b9efd1b436877826d740af481067a6f75acb63ca42dea0e96b084b452cf0d81c5ecf5ca8f18db90305e659b25fe3dab34e44147f69365c9aee28b25b7426b55a0136cf8dc71acd772f932212dd464d6e21d3c322e7f88eaed56bc74e221a41a427a6804af3ef839cc1eb75d21d86605ad5422c646e26cdd8837b10ee1ada4ad09576aa7b139eead5be66c6904a944df32e6874a288ff3d59a482217835c9224c23908bdad6f580ee43ac3b16c399532950358660733392c46021990e0991c6e9d34ffa9478a18ee743dbf848b94dfbafc4ecdef6f1957627ae1d429d520b4761db6fb0f107bdf1ecfa89048306fa57e7169857291479f605f3e2bcb6bd1ea8de50f3604facc4a05ec9f47c8b2f3a6fdfbd55774e45148bf1af75215c41a43956a917449572e299bbd69854d0215377a18a9bb942faa2c8683224ae351395b2314b8058aa51dd9044d5846f54380c762c3f012a0e4b515635a2ef5715b04532d4f11dbbc33a572aaea14197957bc16cd6a8a181becb2b5e8f568f101efa1637bd3c3bf7b0a0d4fbc07762bec90d6f529b71715dd9b2da763ebcc312ce6ef2f1bd38d95d3e6599dc1ab19b0cf9e13862e3213fd056f00e06724fd37337d036a2b68f4f55168d14bc7d2336d225036c96d5aa5b18937395706ebc80bbe6c7d5dd8e482c0344634bbaf2b148a45422870bae621aab685d63faf3e2114037f2c9a77077d0d40ca0aa2d277c81e00ab900919ff047461a9092350eadcc7ef3bf478c52e4f8357140ce5fd565b6bace69b8ce1e99115ac48d1d157ba1311297824e5f056ebf3b4d5b18ef0c68787383d25ff8c448708672fa83aaea5a9e369cb418429075487a4fc69884e6b013419d663aa66766fefe9498f494d12c94994345ce5e1226767c3e8be300c2ee5587691144213b864543448e7015709a354d6153811cd9959256826924b2d92d061431421dac2c8e03654f0f1abb195097a5de8085145764060b30baa1181992a9f11b6e2f89b3f9747c5bbe8a78998d6d4cf50750b9f7d437ffe4df19bb751243b928fc517f8929985ef9f56f52aa1f5e14f0448ec17f126d57fc669d1edb743fb23b55e3e554d362fa9d68c4dd8a7121e027ca95bc3c7777f1d949adc9e044f15b8fd6d3c41ebf5caa65e3780208b3eb8640d7eeb0513349d7e4e80da1375a61fe162d1527ab5caa4be4ebb558708f295e1857c8f88681cfbe7e9582582688cb4aa0466f69bc13683b6dd9f38c8ceeeb8794561b8fbbc941e371cb4bac32cf46a2db3b56b7dac67ced7df8558b6d6a66c84f4303c9a602a8bc8379b5ac3e64ff47afaf580f5d8ac36a935438fe41bae88aa894c81f3680933313c1d6663bd1c9aa06c9025faaa1df7deb804f465768899e4294713e6849c7d2391b1de17bdc87406d0f3047fd301ff6600deeb6c61c3684ac678f5c16d4e0b6e64dd20663c9521f24bbf7dafc026b13690613412eda34a3532d51af9de82633582c57a748721a2e7a188c97f23d133dec46ea030eca7879de461c02d173b9f2c941eafec5572f948f7d45dfffe4bac7ce3ef070e02debf67832b598aa4dcea8fe37b6f2a220422d2f218dacc0536ebfad92119749607172fb67b0c1e3a8b3df00f3e8c2eb9aef37e718de72f3cc3a511c274b67bc9c86635b9bd70717799edbf3d995838ed71281d93a34b840a7c557baa3f61d94e98fa440606c0624e0bba15871036709deac94615a9305658d7012af43553d90a10dc18b872e321e49f517b67f1f363286714eca2e77f12b2fb65c84b8308009d32d89a468759facb76037325d10e4b48543081dccdfd49bb4c149b586c5ca5fb9205f0a63271a92d18836fc93608ee39c2f0c68b2dceb58a6d20642a49700c0a510922bff9b5584c124bbbe942f9bfeb381fd2e7d1bdb589a97724791ec8288c8b5db65dc226c9d1925db82858fd77316eebb2818128da4d2a3b216f1a0f213d3976122084c039c207f278f3b970401264bc999049f5dc2ca98a5a72c04f17a8b70a7ab8c9ce1caa87fdbc1074fbb20d9242cb77e501ef424a9bb25818b4ea0f021abc1976d28893128d7d2fbecfa60c28bf64899398ff43a55369668a0da94bb09e88d5cfb0a8febdf05c80fa11a24f4ee472855398f137e765b763a9c27ac7eda10604a023e0a4921593c785c58ea9f70b03e4dd6178f55e4e9b16c6ea295797a23669bdf0c26913440fc8ab7dc6fc996854af51dd650e94701c753c7efd9d4acca2c6b61425aa6e3175597212bd38a9698151db5459687b61720d24e5fc11a1138d39aa6a4e9e189b4afe35b6c585b87dc680abb8eb7b24413c8b397da29b5e5253b0dbaf537fc801d823b65881cd61b1c7b79d97917a81afd3f2f0457da30441ac186f67575b3eb0b70f49437875be21876db70778ab447ccb99b9ee0f5e74183bb331936bf601a8db448d21ae4f49aa9e96cc06165419166dedd1fc9b186c787aaaad4b1f952881ed332175414add30c1ccef964e1de79389b0cbc103af4624eb0a4521f87a00ec5d973c23de9aec185c700a5ac46ee5b05ce7ba5411066257ce1ff4334a220345dae45ed7118fcff0a70560059828bcbbc5dc3f6206c1e16bf667f63a950c99ef530c60dfce9595fcacc44f8706f57f3080d275e9806bd0b39fd1ae93761babcbe880a082a005b8bacb915e904134762f3a9ea0807daf4fe1e4f46875ac607ec2234e123d90244e7ea6d135bde811b534d663ee50aadc0938ac473d080971218736c596480f2c7f29609f577b1cae294f385b63dd0f694f73fd2992862317c5b0a7cfafb61fe51a0e8c56ff75a0fb1e1e0060f65dca3956a1fee2eeb207cc0938148bca4a3bb1d2221f1a02e6ae902c3f0822ace5c0b397bddfd7755f26b11424af38cfe71108b02015c9dbdaf183e40ddcf37cacdff13fc886f299b703654fc2f642a43de87456cbf1153614fadf582bdd185ae178ba2297a4194ce60a98b01faa45a4c73f429de84ab4b320be04b19c9b45f06f7dfeb1cf337441eb41eb584bebb5855b13e649fc9777357ffb43b457a5512c235eabc1fbde453ed3ca227564afb0c6362924022cea7eec6f5cf0c622d9a7ab78c45f15c030b2cd8cf77717724594d85626f2ce874b8a9d159bbec051871da57586643c1ffcaf217f53edf540948c6e6ffd190b7d5247c533dd364fbb525d71fa4f68ae034d24f637fc75f2196854a563b4cf674cd113ccb90007f24ea5c6905a81fd9b7db87dc422c4f430362bb5e0d70c9f93ae476d25a03da56507c77959e44d313f252a16807f4e6fa4a1bdc045e770b477cf1f9e76b3c2ab322d066c8dea18cd760d8500774517fa97c084ed64cb498003ff132c86e2c421a4574a80180e72a74131ac12cef0f5cbb486be10fb057ecd8586a38cf55f84eacb89f1852f7736177afd499b51a33b0a555a6c4192d06afad9983ba65324c19fa0ca711d21beaa3eba7b700e615875639bcde9017ca05a0401f4f02787ead79f56482de4254a421b2d3229c9558e17e5ce8474ef71cb8f134b6b2429883bfee66eca54aa89a617da81cc1abd5d821f15bb2e158dd8affd7d150d4650ff5621c3501195b5dd9e7dfff27d30597ca87ce4499c20388c7ac4e98cca197216f06c88d7fcad2f5bc65ca9f4985d13b46eeaefa66df7751a40e436d02dd6540eacb15d7b2c88dcbdb8ae87c24fa803f1843670e141aa1c757818bf68a8ff9211e028ce90c83f9b4a624ac4b30829d74a04fb152590a9085929e2770e1c15313355a4d8494d30d8a665ac43b45ee5af09d0d5f1999f74d1a83a3312ca876c9bb50e628221a03a6b505f0f4faa1e83e072987d22184dfc924729f94023bebcedee218eb940c7ec7bffba3e03e4234d9dcc911cb9c459777c85b9cdc8f296938a87e66823fc69431448e420814c0e67c2cf9ba7cd91046a82644503c83bb738dc12e1b0b9d16b019a8bb83f1393db94e59b497c367c728dc04fe5df6dab27e6442c950a4a0bf2f125bb1f981df585163c4dc984f131ce72fc8177251a5b38408c916820a162e122e5c76f3f65225d22fdfbd25886e480183ca104a991a96d04aa59b03f3a0bc4260aba17d0e38336926609e012c1298a53cb5fc6b51a06c43ff335becc14d8941b9baf3ecb2e4bc1556b201653e7df20f2afb033a2c073a42d76bbca85cf377b128701094892d426208bb077e4c0ac90aef12b594e3590164454f3fdce60d00b9f430ca2aa1f6f6e0b3ac1d3c2cf0c8184b60549b8b31146c2b28f9386d461bf34f4509ded5583a1e457c415fe9b52b05b51679b03b3fdfd356bb69175cc25b6ad5ac8871c806e4ed3c3153488a1ef4d941e11d77e84c7797bf36573a6ea5c2cfe8bbd0cf40ce779712cd47f976f59f0df6e5b4682b76ee5a69214907e7c4ebca4629be099f8ea63f5ca4424f96fc32b90a01b337c3a0e2a9ef1a86c875fbd9f35a3e3abfc62d81cb9211b78c62407a3ed0c5fec0e4b4320aff1031db43bc5f4f123e8e255694730e7f6d86e00d136deef2acb16375323d9bd111a4dac998aed2249e78716864fb0d909c751f69b775b01c08ee50af385bc040c010e4845a1380204ef14a591c792b3c0f39a66435c9bb64d9c17e1798b3d0ab17a90c08e6267f08495e94b547c47ef5a07c28c78598f22c67aae9a4da34c3c8b2bfc44d8dc785aa6797e46c7860bd30a42a5f4f0bb1681449a0831a766bc295ce0055884c4535b661e5ac4d21824c12c1f89deadd6a43f3effafff38d79515e16c772d165eb9f54f46ad02464ca71eb10adea26276a143df9c8618acd3f3a04a9a9b043c6cdb3f356d7a0cfba04612c8fc417c9c479103089d448357245221439e5826278f6f246725537d8e0f4d4ad640ffc1de01b89c33d22bd1cf1be3cb760903982bafa8ee9a2d80df8e091b6ae8d7cec113822417d20c6c6fad4f72b3c14b6acfa1e393b14cb53034127071f60277a5508d7e841ac30120742f6324bafb773860bca689f40a1db468c672c948a1a0502a25cc518531eafa59cb03da10126a4ecdb18f2e0c1eb03a5b80ea6e20894adec6b65383e0125023c8bd4609b100a96aa2910e32e3b78fcd198445292ce7ae5c2ec49daa578b22ad1ccc37d3fbfa649dfe8d8dd43be7cb2843a0cb3c70e82d38492139b9fa229b9ca00bb9b4bc61427ae8af27ec6fa40a448e0c7c6b9f2f966778fd4bee39f2db8885b95b675eee28f5cdb402cd1f6cdae00a65eacafbc10fc30f6bd89abb6df597a336fbe19858b6ec3d2c3eae2e86a3986643e7595a6174f1b9b863d51bc452573784e4cadb9a379199ce2996d7b78633f8a9656f2b1416a6873b10f0dbaf805c154aeeccc2f182c621533c0e13c63b5100fbee421fbe6481491fa4a0d8d5e7a1b1f934f6e82684fa192e7d7eaf5c439da09d0c0d2c3658a46d8abcce557d3f0d3e2c1f5f2a7143cb96849ac1aa45822f72daf51fd2cd33985cf6615722c89d9ed3aecbb4efc0daa8a6ffa2b88d477a96c779c631bbaac9222d82c2ee7d986366177581093b4f94028c01af7dd7ffa105f8bf67daa8c1d9774188fff3302405434e82568b3c99aca11b2fc4cb2d63d1e1c0a5aa7c9a972ac267ffb35d575f9ec99736801fa09efb313a4d6db5edd433da783c84fca527a32fbc02dfff0d647126934e4a2208725a96f6a6f99eb17a636ccfa5d93c5dfcf041cf8c1daf83aa1da46bbeaf0ca4356e5890423ceaae2ea43cce1487eba6ca146a8a3d4042a2bc3d8a624257e3314b68577c677a4ebaab48621d4e145f21117cadb76cf54acaf663a826bfab48bed7574e03f8da728a84f5c81c3d48a96b4e284b2b9bafe33f243759b778ced968fe4f824f74255f5d38cd27bfc1c8ddb6d8e31e27f49d1f217cb376c17929cf0c20cdfee4c4ab6bfbb93721c3e94f5decd523192527c9e82887f425bbd6394bcefa898498f16c02b75aed729ecb8a1733958aa82dd7cf43088a8b72e516bf0fe6442d0c5be95fe0909d73b5401881e7a49300187dee889956f69d0d9c01888db9fb178d97dad1f8eec1e99b88ff75674992a9dfa573de8b72db23998707e1bd3b420ed053615f223855d2728142fbfa8617ef9892db170c9e8bf9525e1421e6ae6476d72e8154481d768ffa2bcab710fc9ac1c80bfb2fb9dd3633d315a3a6b9d7ea0f2206a21b09e7bbe849c028f3243c81e7e8c6ea597a43c34df4429bb7918748feabdd0eab6aeb980b48561d3515eacf1a76956b08d25f3426f3192c5152533dc35659528d514d30458ed07708ff9a23f23cf63c54d9d3019d7a2467083759a2605804e715ed3cc063c208f3aadf3ab853fa622df2e612e675dbb6338f6f66c8d13624f8b75a4b0194a0226a6fdc4e1f0177862065ec8e2cded0314d5997d6769e3d6dda3b0eb620e73b6add944ee8261a5ec6fe0b7e6f3f5b6d5b6364a0219ba1129e8780a46ed7101b93e6f62cca39aff4596bee89afb9cfa5eda5f20d7d24cda9513259df296ea3a6297ec4a5bd5375e4013742f6f50982fb0e0443f00a76a5be1f267c3bdaa9c94e8de132ef591e9d7bd833c5dac56743213fc4c232062dd93dd058fff249e499b2636697c7dcb9c5c763920437da81641e22f03fafe3620aa761785f9d6b851e2aa8579ceda1ac22bb80f9615c2c953210ea89c4c980767b931b1675ebfcc46eba8403bcfc0f750873ece0a30680ea1ed09cac026e105b9decffb28797cd3bc833e1c1267abb26446c8941cbcab99da4f0a0f3d7247fecee5313a39ca2993c9f9584452ed56e49585a940e95c7d2e74c2065cf783da2735cf900b298c519baef590ff6c5c350dbc1fb951922f3084085776e98bd5bdf83ad08822cf4dbd499ec1b8ae75762aa74990735c69dbf5d2f9d514246417b76cfecb22aa29aef7ef4b9ff3304847138f419e5ee61998f885a7a3ea4393c35b484b606c5c7b0286a2ba193f0ca5de885bfc1d61e972145cd4a4bd740d01cce681c6ea21a02e4485c1f2a8719d54098fc7d353a77bfa1a18bea340b9bf3b280f3801807e9fa84c2d09730199d0215d050d970f5ff12315d5f18b70be3bc14d680f75b1ddbd404030f926a30e2360612a913eb3836c34d4f83dc6d40f5944ef425ce9b8c331efe3de2c28f792b0cd7e1b06320a859265945f1e4b8dc6184382f3fc0d17f57b52bb267cbc21fdf37d30e5985cd95265ce3cd327d57ca5e8fd73a8846487c50b2c32a6c32c6fb7f63283dd49a52c66e2d29c5cecd09e302b79fd6e9f710dfaf659ae512b21c88082595968c4e8ab344e6589debfa0b0262a1e7e305b375c19635f3348749eda6146547329365dd0328109e1a7f7d3cc6518d79e7cebbd81545072d856a5c5567e7c7e1d82e1160490a53cb4247b05a614552afdfbb54dc1d5c5a61d93305c7f312e68c771ca194c6ece1c8de7093a36b1d3ad5cc7ada9e90a85949843e1a83706f94b3a62dcac1ecce14c0072e8fe92e82dbe92ccb60c4bf4cf69e0670ca61d280ee008b18af0c422a3fe882d880477f523150c9496b1f2ed81cd80eb4e31b9b4a38e7da804d62bf9cfc817ee01596e0303a66f3ccbd73c844a203b65b0ffa2b5e8f84cd87ba2c44adb2491393ce14a406337ee17a783aa97bd6f856a3843c9f13d413c016bbba9529d123947b78413cbe0be5464b019ed48eed96a98b9f31d49d2fd6ac58efeb6a21364c0d6845fc48fddc59bace783e1933d292cc3a1bdfeba8df3d45dd799ee25f9d61cbc34cf76b4e6173a4ab877052c6d4d03712b40261ac5786d679597f6b874480ef834a0f5afd06624a88a701ecff746f7f0aec22bf251859302b5a55415ddead49b0cbbee85dcc5e6686663bb61289a30131243496ec19611bc7492aad0472903977b9e558a8486daae1bc24638a53e4aa136c73caa11e2b715a18bab760899eac4a219b33a7009ec1667e5089da1f200dca8197edf65fc23a4ea182453c494d8e7d7d163184bb69a5234042cb32eb1a174d1e727453d477ef0f6c195a62d6879ee62925b3e57d498897105272599f14c0d501a9c88b4db72874f54816efcc8c937dece2e16776a5d8e3e44919eb08509aabbc8d376c8253b8d9fe1e9f3c9e2a62d12ae31f7f6937e9b207266858b930c550153ab2f89f080528067eaf8a58a1a713f09aad515857565d64a91c8c339fb3385f714d90d0184bdb0b434b95df5245cef076eb7fe8c06ac1a85f47e9139159a9b2869f9006109c8313c3edddc0d59edd444f292c589293711e2b3d07e7eb1fdc84a272fd1b4b84714884fac49f4e1435d3a60540bd471acf1d17317f2ccedeb0c16ba250b01ebc086000ae5c24e92e28bb2eb82ccb8426f39eb0ca5f36e7934e8f9cd0680f72a2d0750367901d2b75ba5dcb3b105452c31f1c9d5249b0241605273c9840895c72c78c534c8999bf9131196dc99ab000e7429cf95a143903e55cd03c97f80c30b02d19c5e27f7290d503403892f53460565ce77cf02ec8e4aec582e2fb04f2198e8a47eef385863e28b721d5488c1792863ab2df63d16cb06b8212bcf28eb21696f73775ae2c4168ce80049105c4a5fb94b374dfde04451195b10024a74d2b9c83eef489aa66cc8e21bd3d366b72c76c748e08457a35897b374d88b8ed087ffd1fbb7afaae5ca5de86e8ab921f3753247fb5dab81285c7e5ea54529ca114d6e8d7bdbfb7c0e8c5e4385c937bd11e82030da542f17ee774d1b24d6838423c84c8b17af7aa0adf608e7e684a75f2dfaf049cd2d8779581733375073ac8b4491da73c31ba8d4bac2082f7a02e727274843496ef4f319b44fafadb3e41d3209d0de5d9d7d75eee195326a2681ec574874f7275106b8ee3faec92e3062c555c73d405964c0cec7c8d6d73432d4842ec776b5aa42a2c644f6a11592009df31eb9157759c1a5be28aeb35d3305a2b9fa82fddfd10c0e21621e6b97df0678691ed8be515302a551b9510547246336caad2f439e4f6cbb3413e5e20176e6d1c25e58b3eb587ef5defa4e1742a501cbfc36455f3c0557295792b8154f0a3a1595c725bb1aebc1e35fa8b489fce4bb96c8a273887e5840528fdde4a1c82f2db2632fd7f60950d3b3b7f6b02ba1720a6b9b4d935353ace54d0a23e9aa02ef29669231f28d65dee09836bad14487c0f3bf69b7a0525351db6856ca2c8b7a72243dcb688c09df464cdcadde0746dd4da46fd7338d8e18bdd66fdd481eb7baf548b648a7ccd6655f138cacd692040d2406dfae21bc173e2b6742426708dbe56f4f5b6e5fb671b1c755f457f11fb0ba216b5eb0f40dc81fb3ce71a20c306692990bc702b4dda50ddce4ea7a4a7a2057a121792a60aa51204fb37ce3d21b1a91b381f55127807454810ac57f931b207462a6d3ef85b29dc0fe70ebee3cd2a1ef40d9f8bdb6b11207429b3fd2dfb3349f00d73eb2f147f0b332c72b13522b8de0d04c19e6e60a7dd461121de14a659e6f86cb839051bc25c21680749a856b76068a21e1cb83e7cd4cabbba87352567202353f9c42c2b7a0b9a59f7d4c59749d9b5b1e307c737891a439a5103e8f21b44c2d36d055d7320a216abf28748a8c71357640e0fae7ef2139d0c8fb27af661d0846615f6f40894559a1f89a959f17f1361c3d8d37d178641207181cbc5ba4e04d6f155ca00d519b462ee9371731c1ebe4083e87542f8d7cb9a216e88b81a41176d1595f076b929ed338a5c207f4e7c2f9917705f669d3acca0ab14141728b978f4dcd227c34d849932196c9591de1cc34a61b94cb19d30ca0f09e2b25cf0fa3e0210a4baf7483a85f289fa2dfc9d84a141f9f8d8887012b37c5678a8cd5626f287f7b6df52391507d6ea510b378c4ae66fdc37af00de380edd747fb88f6c50825d620368153c976c5983302c02443a2b7770a431c5ab1f8f92cd</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Organization</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>conda pack 环境迁移</title>
      <link href="/2024/07/28/conda-pack-%E7%8E%AF%E5%A2%83%E8%BF%81%E7%A7%BB/"/>
      <url>/2024/07/28/conda-pack-%E7%8E%AF%E5%A2%83%E8%BF%81%E7%A7%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>内网/网络差的条件下conda环境迁移</p></blockquote><p>近日在用实验室的内网服务器跑实验，需要做环境迁移，之前遇到该类问题是直接scp将conda包中的envs对应的环境传到新机器上。</p><p>本次由于内网机器关闭了与外界的所有端口，只能通过web交互，故需要打包通过web上传。本文记录打包及上传过程</p><h3 id="1-base环境安装conda-pack">1. base环境安装conda pack</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install conda-pack</span><br></pre></td></tr></table></figure><h3 id="2-打包环境">2. 打包环境</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda pack -n distill</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2024/12/05/qHgIEbFWoAB9TPe.png" alt="image-20240728200954675" style="zoom:67%;" /><p>报错：CondaPackError: Cannot pack an environment with editable packages installed</p><p>解决方案：忽略可编辑的包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda pack -n distill -o mypack.tar.gz --ignore-editable-packages</span><br></pre></td></tr></table></figure><h3 id="3-上传解压">3. 上传解压</h3><ul><li><p>在envs下，<code>mkdir hxw</code></p></li><li><p>解压， tar -xzvf hxw.tar.gz -C hxw</p></li></ul><h3 id="4-查看结果">4. 查看结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure><hr><blockquote><p>tar 打包文件夹</p><p>压缩：tar -cJvf distill.tar.xz distill/</p><p>目录排除： tar -cJvf distill.tar.xz —exclude=/path/output distill/</p><p>解压：tar -xvf distill.tar.xz -C ./</p><p>备注：</p><p>-c或–create 建立新的压缩文件。</p><p>-C&lt;目的目录&gt;或–directory=&lt;目的目录&gt; 解压到指定的目录</p><p>-x或–extract或–get 从压缩文件中还原文件。</p><p>-v或–verbose 显示指令执行过程。</p><p>-f&lt;压缩文件&gt;或–file=&lt;压缩文件&gt; 指定压缩文件。</p><p>-J&lt;压缩文件&gt; 压缩为xz格式。</p><p>-t 查看你目录结构</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conda-pack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xming实现x11转发</title>
      <link href="/2024/06/04/xming%E5%AE%9E%E7%8E%B0x11%E8%BD%AC%E5%8F%91/"/>
      <url>/2024/06/04/xming%E5%AE%9E%E7%8E%B0x11%E8%BD%AC%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p>网上关于xming教程都是结合xshell或者putty使用的，但我个人而言，更喜欢简单的windows terminal，而关于wt如何结合xming实现x11转发教程较少，因此记录一下。同时另一方面，vs code + xming也是开发时重要的组成部分，因此转载csdn一篇文章作为记录。</p></blockquote><h3 id="xming-windows-terminal">xming + windows terminal</h3><ul><li><p>xming 安装：<a href="https://sourceforge.net/projects/xming/">Xming X Server for Windows download</a></p></li><li><p>打开xming，设置x server端口</p><img src="https://s2.loli.net/2024/12/05/udk9GtjH2wAv8rE.png" alt="image-20240604191335373" style="zoom:67%;" /></li><li><p>设置windows环境变量：<code>DISPLAY=localhost:0.0</code></p></li><li><p>wt 连接Linux 服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -Y t4</span><br></pre></td></tr></table></figure><p><strong>Y参数表示可信赖的x11，即本个ssh连接开启x11转发</strong></p></li><li><p>测试：xclock</p></li></ul><h3 id="xming-vs-code">xming + vs code</h3><p><a href="https://blog.csdn.net/Dteam_f/article/details/109806294">VSCode 连接远程服务器使用图形化界面（GUI）_vscode 连接远程服务器使用图形化界面(gui)-CSDN博客</a></p><p>注：</p><p>4.4 与 4.5 都是设置环境变量，任意选一个即可</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第二十条</title>
      <link href="/2024/05/04/%E7%AC%AC%E4%BA%8C%E5%8D%81%E6%9D%A1/"/>
      <url>/2024/05/04/%E7%AC%AC%E4%BA%8C%E5%8D%81%E6%9D%A1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2024春节档电影第二十条观后感</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 电影 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 第二十条 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux常用命令</title>
      <link href="/2024/05/04/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/05/04/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Linux常用命令备忘</p></blockquote><h2 id="远程主机使用本地代理">远程主机使用本地代理</h2><h3 id="Step-1-建立ssh转发隧道">Step 1 : 建立ssh转发隧道</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -N -R 7897:localhost:7897 &lt;user&gt;@&lt;server&gt; -p port  <span class="comment">#将远端7897端口转发到本地7897</span></span><br></pre></td></tr></table></figure><h3 id="Step-2：远端设置环境变量">Step 2：远端设置环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim ~/.bashrc</span></span><br><span class="line"><span class="built_in">alias</span> proxy=<span class="string">&quot;export http_proxy=http://127.0.0.1:7897 https_proxy=http://127.0.0.1:7897&quot;</span></span><br><span class="line"><span class="built_in">alias</span> unproxy=<span class="string">&quot;unset http_proxy https_proxy&quot;</span></span><br></pre></td></tr></table></figure><h2 id="GPU清理No-such-process">GPU清理No such process</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fuser -v /dev/nvidia* | awk <span class="string">&#x27;&#123;for(i=1;i&lt;=NF;i++)print &quot;kill -9 &quot; $i;&#125;&#x27;</span> | bash <span class="comment">#仅限自己的</span></span><br></pre></td></tr></table></figure><p>若要清理他人的，则需要使用sudo命令，并同时想办法筛掉非no such process，建议写一个python脚本去执行</p><h2 id="拷贝">拷贝</h2><h3 id="scp">scp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scp [-Cpqrv] [-P port] [[user@]host1:]file1 [...] [[user@]host2:]file2</span><br><span class="line"><span class="comment"># 简易写法</span></span><br><span class="line">scp [可选参数] file_source file_target</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数解释</span></span><br><span class="line">-C： 允许压缩。</span><br><span class="line">-p：保留原文件的修改时间，访问时间和访问权限。</span><br><span class="line">-q： 不显示传输进度条。</span><br><span class="line">-r： 递归复制整个目录。</span><br><span class="line">-v：详细方式显示输出。用于调试</span><br><span class="line">-P port：注意是大写的P, port是指定数据传输用到的端口号。</span><br></pre></td></tr></table></figure><h3 id="rsync">rsync</h3><p>与其他文件传输工具（如 FTP 或SCP）不同，rsync 的最大特点是会检查发送方和接收方已有的文件，仅传输有变动的部分（默认规则是文件大小或修改时间有变动）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rsync -avz --append --pregress -e <span class="string">&quot;ssh -p &lt;port&gt;&quot;</span> <span class="built_in">source</span>/ user@remote_host:/destination</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数解释</span></span><br><span class="line">-a: 除了可以递归同步以外，还可以同步元信息（比如修改时间、权限等）。</span><br><span class="line">-v: 参数表示输出细节。</span><br><span class="line">-z: 参数指定同步时压缩数据。</span><br><span class="line">-e: 参数指定使用 SSH 协议传输数据。在端口号不是22时非常重要。</span><br><span class="line">--append: 增量追加同步（即只传输文件新增的部分，而不是整个文件）</span><br><span class="line">--progress： 显示传输进度</span><br></pre></td></tr></table></figure><p><strong>Note</strong>: rsync需要注意source后面加了**“ / ”** 的话就是只拷贝source下的所有文件目录，而不拷贝source这个目录</p><h2 id="查找文件">查找文件</h2><h3 id="Find">Find</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名</span></span><br><span class="line">find ./ -iname <span class="string">&quot;*.c&quot;</span> <span class="comment"># 所有后缀为.c的文件</span></span><br><span class="line"></span><br><span class="line">-i: 忽略大小写</span><br><span class="line"></span><br><span class="line"><span class="comment">#文件大小</span></span><br><span class="line">find /home -size +1M <span class="comment"># home目录下大于1M的s</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#文件内容</span></span><br><span class="line">find /home -<span class="built_in">type</span> f | xargs grep <span class="string">&quot;hello&quot;</span></span><br><span class="line">OR</span><br><span class="line">grep -r <span class="string">&quot;hello&quot;</span> /home/*.tx</span><br></pre></td></tr></table></figure><h2 id="后台运行">后台运行</h2><h3 id="nohup">nohup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> Command &lt;Arg&gt; &amp;</span><br><span class="line"><span class="comment"># Arg</span></span><br><span class="line">/dev/null 空设备文件</span><br><span class="line">0 标准输入</span><br><span class="line">1 标准输出</span><br><span class="line">2 标准错误</span><br><span class="line">&gt; file &lt;==&gt; 1&gt; file</span><br><span class="line">2 &gt; &amp;1 表示将标准错误重定向到标准输出</span><br></pre></td></tr></table></figure><p>例子</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> python tools/train.py &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="查看ip端口">查看ip端口</h2><h3 id="ip-addr-netstat-lsof">ip addr , netstat,lsof</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip addr <span class="comment">#查看ip</span></span><br><span class="line">sudo netstat -tunp | grep 端口号</span><br><span class="line">lsof -i :port <span class="comment">#查看占用端口的进程号</span></span><br></pre></td></tr></table></figure><h2 id="新用户">新用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意useradd以及adduser区别，useradd不创建用户目录，adduser为一个perl脚本，包含了创建用户目录，创建用户组等操作，更全面</span></span><br><span class="line">adduser &lt;username&gt; <span class="comment">#添加</span></span><br><span class="line">deluser &lt;username&gt; <span class="comment">#删除</span></span><br><span class="line">usermod -g sudo &lt;username&gt; <span class="comment">#sudo权限 -&gt; g</span></span><br><span class="line">usermod -g root &lt;username&gt; <span class="comment">#root权限 -&gt; 超级管理员</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># adduser 常用选项</span></span><br><span class="line">–system添加系统用户或组</span><br><span class="line">–disabled-login禁止登录到用户账户</span><br><span class="line">–disabled-password禁止使用密码登录</span><br><span class="line">–gid将组ID号设置为。如果指定了用户，则还将用户添加到组</span><br><span class="line">–group运行addgroup命令并添加用户组。如果指定了–system，则添加系统用户和组</span><br><span class="line">–home将用户的主目录设置为</span><br><span class="line">–shell使用作为用户的登录shell</span><br><span class="line">–ingroup将用户添加到，而不是配置文件中的默认组</span><br><span class="line">–no-create-home避免为用户创建主目录</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>热辣滚烫</title>
      <link href="/2024/04/30/%E7%83%AD%E8%BE%A3%E6%BB%9A%E7%83%AB/"/>
      <url>/2024/04/30/%E7%83%AD%E8%BE%A3%E6%BB%9A%E7%83%AB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2024春节档电影热辣滚烫观后感</p><p>这篇 blog 含有剧透</p></blockquote><h2 id="梗概">梗概</h2><p><strong>让自己赢一次,赢自己一次。</strong></p><p>２０２４春节档爆火电影——热辣滚烫，是贾玲自导自演的第二部部电影，改编自２０１４年日本电影百元之恋，由贾玲和雷佳音领衔主演。</p><p>故事讲述的是主人公杜乐莹，一个备受欺负的小人物，一个劳苦大众的典型人物，在历经折磨与受尽侮辱、背叛之后，看破人生，反抗人生，挑战自我的过程。客观上看也是爱自己，即女性独立主义的诠释，生活不再聚焦于他人，而是注重自我进步。</p><h2 id="剧情回顾">剧情回顾</h2><p>影片开头，是从事记者的远房表妹豆豆为了转正而来到年已３２的杜乐莹家中为她拍纪录片尝试帮助她找到工作，这个小片段中，我们看出了父母为孩子前途的愁态，妹妹为姐姐不争气、啃老的厌恶。</p><p>随后画面一转，来到第二个小片段，乐莹的对象以及闺蜜好上了，乐莹与他们之间的友谊并不被他们重视，这对小三反而为了外表光鲜，他人看法，请求乐莹去当伴娘。</p><p>再然后，迷茫的乐莹在街头闲游一天后回到家中，（老实说这一段我不知道是想表现什么东西，看上去倒像是导演在炫技）被妹妹转头想要乐莹过户房子，以小外甥读书的名义，乐莹过户也无可厚非吧，但或许乐莹也是气头上，故对装可怜的妹妹说了一句，自己要婚内出轨小三，被人抛弃也是理所当然，妹妹便以发狂，丝毫不顾及乐莹的自尊，对她进行言语侮辱甚至大打出手。</p><p>乐莹最终忍无可忍，离家出走，去一个小饭店当了服务员，爱上健身房里热爱拳击的昊坤。本以为这是乐莹人生中的一个转折点，但出乎意料的是，男友也只是一个寻常人，只是为了生活而蹒跚向前的小丑罢了，他并没有改变乐莹的现状，而只是给了本就处于苦难生活的乐莹另一记重锤，让乐莹对所谓爱情，伴侣不再相信。随之而来是饭店老板的调戏，前面提到的豆豆骗她录节目，为了制作噱头给她安了一个无理粗俗、谩骂母亲的人设，成为众矢之的。</p><p>乐莹崩溃了，彻底受够了这样的生活了，如行尸走肉般回到房间，从窗户一跃一下，但被废弃的小房屋拦住，仅受了些皮外伤。痛哭怀疑人生的乐莹忽然看到一张拳击比赛的传单飘了过来，”人生总要赢一次“的口号燃气了她的希望。</p><p>她决定总要让自己赢一次，赢自己一次，打败这个狗屁的生活。</p><p>全片的转折从此处开始，随后是她艰苦训练的过程，日复一日的训练，最终成功减重１００斤，成功过了拳击比赛对体格的要求。</p><p>比赛中，乐莹一败再败，但她一直坚持，从一开始的”不结束“到最后被打的鼻青脸肿，比赛已然判负后依然说着”不结束“。那一刻她已经赢了，她实现了自己要打拳击的目标，她赢过了自己的狗血生活，她也赢得了自己该有的尊重。</p><h2 id="评">评</h2><p>总的来说剧情较平淡，个人也认同网上往上的说法：”为了记录减肥的过程，改编了一部电影“，毕竟李焕英上映时，贾玲曾说过票房过30亿就瘦成一道闪电。当然电影结尾花絮部分也表明了主旨：为了让自己变好，记录自己变好。</p><p>以下是对象对电影的看法：</p><ol><li><p>影片表现力好的方面是在乐莹在擂台上不断挨揍时，路人旁观者被她坚持不懈，明知不可为而为之的心性大声叫好、鼓掌，而那些她曾经的旧识，从父母、妹妹到曾经的健身房小丑教练都对她的行为大感震撼，或是大为不解。导演并没有刻画这些人在故事主人公变”强“之后就改变一贯态度去祝福或者心系她，对配角形象描述地更深刻、更具有&quot;人性化&quot;，而非主角光环现象。</p></li><li><p>事实上乐莹在打完拳击后，她的心态，处事方法皆已改变，那为何不再去多着写笔墨刻画她爱自己，独立之后的生活态度对个人生活状况的细微变化，从而能够将故事闭环。</p></li></ol><p>最后放一张影片中我喜欢的图片来当作结尾吧</p><img src="https://s2.loli.net/2024/12/05/HOR5KWZjECfzvnS.png" alt="图源网络" style="zoom:60%;" />]]></content>
      
      
      <categories>
          
          <category> 电影 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 热辣滚烫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rebase使用笔记</title>
      <link href="/2024/04/29/rebase%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/04/29/rebase%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>之前写了rebase与merge的区别以及建议使用rebase，但实际用rebase的时候还是存在不少问题，此处记录一下。</p></blockquote><h2 id="rebase命令">rebase命令</h2><h3 id="rebase-remote-branch：">rebase remote branch：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull --rebase &lt;remote&gt; &lt;branch&gt;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">remote 指的是远程仓库名，branch指的是远程仓库的分支名</span></span><br></pre></td></tr></table></figure><p>因此pull过程是先checkout到需要pull的分支，然后fetch远程仓库的分支，然后rebase到远程仓库的分支。</p><h3 id="rebase-local-branch：">rebase local branch：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rebase &lt;branch&gt;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">branch指的是本地分支名</span></span><br></pre></td></tr></table></figure><h2 id="rebase执行的过程，以rebase远程分支为例">rebase执行的过程，以rebase远程分支为例</h2><p>现在假设从主分支（<code>origin</code>）切出一条分支（<code>mywork</code>），进行功能开发，同时主分支上也合并了一下别人的修改，这时候两个分支开始‘分叉’了。</p><img src="https://s2.loli.net/2024/12/05/NarISMFs8XqUAGP.png" alt="示意图1" style="zoom:50%;" /><p>假设现在功能开发完成，需要进行分支合并，用rebase操作。它会首先变基到目标分支最新提交C4上，然后依次比对mywork分支自C2以来的所有提交与C4的差异，然后将这些差异逐个应用到C4上，最终得到C5’,C6’ ，这样就完成了rebase操作。</p><img src="https://s2.loli.net/2024/12/05/1qeEKBFhwiVaWmC.png" alt="image-20240429232802787" style="zoom:50%;" /><img src="https://s2.loli.net/2024/12/05/JfA1m5Y2EuxXZlh.png" alt="image-20240429232832955" style="zoom:50%;" /><p>rebase结束后将分支push到origin即可，push完整命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;remote&gt; &lt;branch&gt;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">remote 指的是远程仓库名，branch指的是远程仓库的分支名,命令即将当前仓库推送到特定远程仓库中</span></span><br></pre></td></tr></table></figure><h2 id="rebase时处理冲突">rebase时处理冲突</h2><p>rebase时可能出现冲突，这时候需要手动解决冲突，解决完冲突后需要执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure><p><strong>注意，如果使用vs code处理冲突时，git插件有时可以在我们处理冲突结束后，直接点击继续即可。若显示的是提交，则我们不能点提交去继续执行rebase，因为这会在一个detached的临时分支上提交更改。相反，此时我们应该手动执行以上命令</strong></p><h2 id="杂谈">杂谈</h2><p>vs code的gitlens可以查看提交图，但当我们checkout到某次提交上时，gitlens显示的将会是那次提交的名称，即这是一个匿名分支，如果我们在这个匿名分支上进行更改提交，那么会在这个匿名分支上生成提交历史，而不是在现有分支中，因此容易导致分支混乱，最好的办法是针对这个匿名分支创建一个新的分支，然后再进行提交。</p><p>一点问题：</p><p>当我在做算法模型开发时，如果我想在一个文件中重复尝试多个配置参数，我可能想要每次提交保留一组配置参数，以便我可以回溯并查看之前的参数组合。但如果我发现之前参数组合可能存在一定不合理性，即我想更新那次提交的内容，并将更新的内容仍然保留在那次提交中，这时候我应该怎么做呢？</p><p>用图来简单表示我的想法：</p><img src="https://s2.loli.net/2024/12/05/fTCHwzkEtMnNiLO.png" alt="image-20240429234710956" style="zoom:200%;" /><p>即我想在提交历史中更改B这个提交，但仍然保留提交C和D，即提交的历史变为A-&gt;B’-&gt;C-&gt;D。</p><p>以下是chatgpt回答，以后可以验证一下。</p><blockquote><p>git 我有提交A-&gt;B-&gt;C-&gt;D，我现在想要回到提交B中，更改某些文件内容，并提交这个更改，但我不想这个更改影响后续C和D的提交，即我想更改B后的提交历史为A-&gt;B’-&gt;C-&gt;D，有什么办法能够实现</p><ol><li><strong>打开交互式重新基础</strong>：<br>运行以下命令，将您的提交历史从 B 开始进行交互式重新基础：</li></ol>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~3</span><br></pre></td></tr></table></figure><p>这里的 <code>HEAD~3</code> 表示从当前分支的 HEAD 开始向前数三个提交（即包括 A、B 和 C）。</p><ol start="2"><li><strong>编辑提交历史</strong>：<br>执行上述命令后，Git 会打开一个文本编辑器，显示您要进行交互式 rebase 的提交历史。您将看到类似于以下内容的界面：</li></ol>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick a1a1a1a Commit A</span><br><span class="line">pick b2b2b2b Commit B</span><br><span class="line">pick c3c3c3c Commit C</span><br></pre></td></tr></table></figure><ol start="3"><li><p><strong>选择要编辑的提交</strong>：<br>将您想要修改的提交从 <code>pick</code> 改为 <code>edit</code>。在您的例子中，您想要编辑 Commit B，因此将 <code>pick b2b2b2b Commit B</code> 改为 <code>edit b2b2b2b Commit B</code>。</p></li><li><p><strong>应用更改并提交</strong>：<br>保存并关闭编辑器后，Git 将会从 Commit A 开始逐个应用提交。当 Git 应用到 Commit B 时，它将会停止并给出提示，告诉您您已经处于编辑状态，您可以进行更改。</p></li><li><p><strong>进行更改并提交</strong>：<br>您可以在这个状态下更改文件。完成更改后，使用 <code>git add</code> 将更改的文件添加到暂存区，然后使用 <code>git commit --amend</code> 提交更改。</p></li><li><p><strong>继续 rebase 操作</strong>：<br>当您完成更改并提交后，继续 rebase 操作：</p></li></ol>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><p>Git 将会继续应用其余的提交（Commit C 和 Commit D）。</p><p>通过上述步骤，您可以在提交 B 之后进行更改，并保持提交历史的完整性，而不影响 Commit C 和 Commit D。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>抛硬币例子解释最大似然与贝叶斯</title>
      <link href="/2024/04/16/%E6%8A%9B%E7%A1%AC%E5%B8%81%E4%BE%8B%E5%AD%90%E8%A7%A3%E9%87%8A%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%B8%8E%E8%B4%9D%E5%8F%B6%E6%96%AF/"/>
      <url>/2024/04/16/%E6%8A%9B%E7%A1%AC%E5%B8%81%E4%BE%8B%E5%AD%90%E8%A7%A3%E9%87%8A%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%B8%8E%E8%B4%9D%E5%8F%B6%E6%96%AF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文主要讲述了贝叶斯后验分布与最大似然分布之间的差别。贝叶斯后验分布从参数分布的角度去认识参数；而最大似然是一个点估计法，估计的是模型最有可能的参数组合，相对于贝叶斯后验估计来说，它只考虑了参数分布的期望，即最大似然的结果就是后验分布的期望，没有考虑到参数分布中其他的可能性。</p></blockquote><h2 id="贝叶斯建模">贝叶斯建模</h2><p>贝叶斯建模：将问题转化为贝叶斯公式的形式，即给定数据<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>，参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>，我们要求解的是参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>的后验分布<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>θ</mi><mi mathvariant="normal">∣</mi><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\theta|D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span>。</p><p>通用形式可以写为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>D</mi><mo>∼</mo><mi>p</mi><mo stretchy="false">(</mo><mi>D</mi><mi mathvariant="normal">∣</mi><mi>θ</mi><mo stretchy="false">)</mo><mo>←</mo><mtext>数据生成分布，模型数据的分布</mtext><mspace linebreak="newline"></mspace><mi>θ</mi><mo>∼</mo><mi>p</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>←</mo><mtext>参数的先验分布</mtext><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">D \sim p(D|\theta) \leftarrow 数据生成分布，模型数据的分布 \\\theta \sim p(\theta) \leftarrow 参数的先验分布 \\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">数据生成分布，模型数据的分布</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">参数的先验分布</span></span><span class="mspace newline"></span></span></span></span></p><p>我们想要学习参数在给定数据下的后验分布<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>θ</mi><mi mathvariant="normal">∣</mi><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\theta|D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>θ</mi><mi mathvariant="normal">∣</mi><mi>D</mi><mo stretchy="false">)</mo><mo>∝</mo><mi>p</mi><mo stretchy="false">(</mo><mi>D</mi><mi mathvariant="normal">∣</mi><mi>θ</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\theta|D) \propto p(D|\theta)p(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span></span></p><h2 id="简单用例：Beta-Bernoulli-模型">简单用例：Beta-Bernoulli 模型</h2><p>假设我们有一个硬币，我们不知道这个硬币是公平的还是不公平的，我们想要通过抛硬币的结果来估计这个硬币是公平的概率。<br>我们有一系列观测值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">X_1,X_2,...X_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">X_i \in \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>，1表示正面，0表示反面。</p><p>假设每个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>来自于数据生成分布，服从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">∣</mi><mi>π</mi><mo stretchy="false">)</mo><mo>=</mo><mi>π</mi></mrow><annotation encoding="application/x-tex">P(X_i = 1|\pi) = \pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span></p><p>进一步假设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是独立同分布的，即</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mi mathvariant="normal">∣</mi><mi>π</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><mi>π</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(X_1,X_2,...X_N|\pi) = \prod_{i=1}^{N}P(X_i|\pi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.106em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span></span></span></span></span></p><p>由于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>X</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mi>π</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>π</mi><msub><mi>X</mi><mi>i</mi></msub></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>π</mi><msup><mo stretchy="false">)</mo><mrow><mn>1</mn><mo>−</mo><msub><mi>X</mi><mi>i</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">P(X-i|\pi) = \pi^{X_i}(1-\pi)^{1-X_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>，上述式子可以写成</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mi mathvariant="normal">∣</mi><mi>π</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>π</mi><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub></mrow></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>π</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">P(X_1,X_2,...X_N|\pi) = \pi^{\sum_{i=1}^{N}X_i}(1-\pi)^{N-\sum_{i=1}^{N}X_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>由此可以得到我们需要的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>关于数据<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的后验分布,</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>π</mi><mi mathvariant="normal">∣</mi><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo>∝</mo><msup><mi>π</mi><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub></mrow></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>π</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub></mrow></msup><mi>p</mi><mo stretchy="false">(</mo><mi>π</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\pi|X_1,X_2,...X_N) \propto \pi^{\sum_{i=1}^{N}X_i}(1-\pi)^{N-\sum_{i=1}^{N}X_i}p(\pi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span></span></span></span></span></p><p>观察上述式子，紧接着来到下一个问题，我们如何选择先验分布<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>π</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\pi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span></span></span></span>？</p><h3 id="共轭先验">共轭先验</h3><h4 id="Beta分布">Beta分布</h4><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>B</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></mfrac><msup><mi>π</mi><mrow><mi>a</mi><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>π</mi><msup><mo stretchy="false">)</mo><mrow><mi>b</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">Beta(a,b) = \frac{\Gamma(a+b)}{\Gamma(a)\Gamma(b)}\pi^{a-1}(1-\pi)^{b-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>可以发现，Beta分布的形式与似然项形式相近，因此我们可以尝试使用Beta分布作为先验分布。</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>π</mi><mi mathvariant="normal">∣</mi><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo>∝</mo><msup><mi>π</mi><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub><mo>+</mo><mi>a</mi><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>π</mi><msup><mo stretchy="false">)</mo><mrow><mi>N</mi><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>X</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">p(\pi|X_1,X_2,...X_N) \propto \pi^{\sum_{i=1}^{N}X_i+a-1}(1-\pi)^{N-\sum_{i=1}^{N}X_i+b-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">a</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3064em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0564em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0785em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">b</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>观察上式发现：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\Gamma(a,b)}{\Gamma(a)\Gamma(b)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Γ</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">a</span><span class="mclose mtight">)</span><span class="mord mtight">Γ</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">b</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Γ</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>被舍弃了，因为它与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>无关，可以视为一个常数</li><li>后验分布同样正比于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>X</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>b</mi><mo>+</mo><mi>N</mi><mo>−</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>X</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Beta(a+\sum_i X_i , b+N - \sum_iX_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>分布</li></ul><p>因此，后验分布服从Beta分布</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>π</mi><mi mathvariant="normal">∣</mi><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mo>∼</mo><mi>B</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>b</mi><mo>+</mo><mi>N</mi><mo>−</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi|X_1,X_2,...X_N \sim Beta(a+\sum_i X_i , b+N - \sum_iX_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>注意到，我们选择Beta分布作为参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>的鲜艳分布，我们发现它的后验分布同样是也是Beta分布，这种性质称为共轭性。</p><p>共轭先验价值：<strong>有了共轭先验这个性质，我们只需要收集足够多的数据就可以估计出后验分布</strong>，如抛硬币问题中，我们只需要计数正面向上的次数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\sum_iX_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>以及反面向上次数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>−</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">N - \sum_iX_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><h2 id="贝叶斯后验能够得到什么？">贝叶斯后验能够得到什么？</h2><p>基于抛硬币的贝叶斯建模问题，我们可以得到参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>后验分布的期望以及方差</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>π</mi><mi mathvariant="normal">∣</mi><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>a</mi><mo>+</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub></mrow><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>N</mi></mrow></mfrac><mspace linebreak="newline"></mspace><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>π</mi><mi mathvariant="normal">∣</mi><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>b</mi><mo>+</mo><mi>N</mi><mo>−</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>N</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">E(\pi|X_1,X_2,...X_N) = \frac{a+\sum_iX_i}{a+b+N} \\Var(\pi|X_1,X_2,...X_N) = \frac{(a+\sum_iX_i)(b+N-\sum_iX_i)}{(a+b+N)^2(a+b+N+1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.209em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4397em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Va</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3757em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4397em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>注意到随着<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>的增加，</p><ul><li>期望收敛到实际正面向上的次数</li><li>方差收敛到0</li></ul><p>与最大似然估计比较（寻找一个最佳点估计）</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mrow><mi>M</mi><mi>L</mi><mi>E</mi></mrow></msub><mo>=</mo><mfrac><mrow><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>X</mi><mi>i</mi></msub></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">\pi_{MLE} = \frac{\sum_iX_i}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1257em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4397em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><strong>贝叶斯估计捕获了参数的不确定性，因此在数据量较少的情况下，贝叶斯估计更加稳定。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 贝叶斯后验估计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Channel-Wise Attention 论文阅读</title>
      <link href="/2024/04/09/Channel-Wise-Attention-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
      <url>/2024/04/09/Channel-Wise-Attention-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Channel Distillation：Channel-Wise Attention for Knowledge Distillation 论文精读总结</p></blockquote><h2 id="Title">Title</h2><p>Channel Distillation: Channel-Wise Attention for Knowledge Distillation</p><h2 id="Summary">Summary</h2><p>文章核心内容：将通道测的注意力分布作为知识迁移给学生模型</p><p>文章缺点：消融实验太少，无法提供有力证据支撑前面的猜想</p><h2 id="Research-Objective">Research Objective</h2><p>通过<strong>知识蒸馏</strong>的方法得到<strong>准确度</strong>高、<strong>参数量</strong>小 的<strong>学生模型</strong></p><h2 id="Problem-Statement">Problem Statement</h2><ol><li>the teacher is not good enough, and the student cannot accurately learn the essential information from the teacher.（学生模型无法准确学到教师模型的知识）</li><li>if the teacher is not completely correct, during training, ifthe student makes a decision with reference to the decisive result of the teacher, the poor output of the teacher will have a bad influence on the student instead.（教师模型准确率不是百分之百，错误样本会误导学生模型）</li><li>there is a margin betweenthe teacher and the student since they have different structure, which will make the student unable to find its own optimization space if we always let the teacher supervise it.（学生模型与教师模型网络结构的不同，导致它们具有不同的参数空间，因此不能一直在教师模型的监督下学习）</li></ol><h2 id="Method-s">Method(s)</h2><ol><li><p>利用注意力的机制迁移通道信息：<code>Channel Distilltaion</code></p><ul><li><p>SENet注意力机制：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mi>c</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mi>H</mi><mo>×</mo><mi>W</mi></mrow></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>H</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>W</mi></munderover><msub><mi>u</mi><mi>c</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w_c = \frac{1}{H \times W}\sum_{i=1}^{H}\sum_{j=1}^{W}u_c(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.2421em;vertical-align:-1.4138em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span></p></li><li><p>CD Loss：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>C</mi><mi>D</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>c</mi></munderover><mo stretchy="false">(</mo><msubsup><mi>w</mi><mi>s</mi><mrow><mi>i</mi><mi>j</mi></mrow></msubsup><mo>−</mo><msubsup><mi>w</mi><mi>t</mi><mrow><mi>i</mi><mi>j</mi></mrow></msubsup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mi>n</mi><mo>×</mo><mi>c</mi></mrow></mfrac><mspace linebreak="newline"></mspace><mi>i</mi><mtext>表示样本，</mtext><mi>j</mi><mtext>表示通道</mtext></mrow><annotation encoding="application/x-tex">CD(s,t)=\frac{\sum_{i=1}^{n}\sum_{j=1}^{c}(w^{ij}_s-w^{ij}_t)^2}{n\times c} \\i表示样本，j表示通道</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.5377em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7684em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.8258em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9426em;"><span style="top:-2.4542em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">表示样本，</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mord cjk_fallback">表示通道</span></span></span></span></span></p></li></ul></li><li><p><code>Guided Knowledge Distillation</code></p><ul><li><p>原始KD：</p><p><img src="https://s2.loli.net/2024/12/05/3aQUcPlH5kyA2Zv.png" alt="image-20230917163137751"></p></li><li><p>GKD：</p><p><img src="https://s2.loli.net/2024/12/05/l1pcFsUkm3Dj2bA.png" alt="image-20230917163153702"></p></li></ul></li><li><p><code>Early Decay teacher</code></p><p><img src="https://s2.loli.net/2024/12/05/Vb1h2qHZTGzS6yr.png" alt="image-20230917163226277"></p><p><img src="https://s2.loli.net/2024/12/05/fos13b6LRAk9OTG.png" alt="image-20230917163233378"></p><p><img src="https://s2.loli.net/2024/12/05/9ER1M2BgxU6yYSo.png" alt="image-20230917163530343"></p></li></ol><h2 id="Evaluation">Evaluation</h2><p>作者如何评估自己的方法，有没有问题或者 可以借鉴的地方。</p><p>指标：Top1 error 、Top5 error</p><p>网络：Resnet34(Teacher)、Resnet18(Student)</p><p>问题：没有图、分析不够</p><h2 id="Conclusion">Conclusion</h2><p>transfer the channel attention information from the teacher to the student, not just mimicking the teacher’s representation in label.</p><h2 id="Notes">Notes</h2><ol><li>除了CD，另外两个idea都可以与别的方法结合起来，是否会比本文的CD更好</li><li>通道知识迁移，与标签知识迁移同时进行，与已有的工作：通过注意力机制的特征图迁移隐层参数，再作标签知识的迁移。哪种更好</li><li>既然有Teacher模型，为什么不利用Teacher对未监督数据做数据增强</li><li>原理图简陋</li></ol>]]></content>
      
      
      <categories>
          
          <category> 论文阅读 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 知识蒸馏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DKD论文总结</title>
      <link href="/2024/04/09/DKD%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/"/>
      <url>/2024/04/09/DKD%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Decoupled Knowledge Distillation 论文精读总结</p></blockquote><h2 id="Title">Title</h2><p>Decoupled Knowledge Distillation CVPR 2022</p><h2 id="Summary">Summary</h2><h3 id="将KD-loss拆分成TCKD（二值概率）以及NCKD（多值概率），并探究了KD-loss存在的局限性，提出了DKD方法">将KD loss拆分成TCKD（二值概率）以及NCKD（多值概率），并探究了KD loss存在的局限性，提出了DKD方法</h3><h2 id="Research-Objective">Research Objective</h2><p>性能最好的蒸馏方法都是基于中间层特征的蒸馏，这类方法不够完美：会引进额外的计算量和内存消耗。直觉上，基于logit的方法相比基于feature在更高的语义层面，因此它应当与基于features具有相当的性能。</p><h2 id="Problem-Statement">Problem Statement</h2><p>通过将KD的loss拆分成TCKD与NCKD，探究发现：</p><ol><li>首先，NCKD loss项的权重大小与Teacher模型对样本目标类的置信度负相关，事实上，teacher模型置信度越高的样本，应该具有更可靠以及更有价值的知识</li><li>其次，TCKD与NCKD权重高度耦合，TCKD与NCKD的权重应该被分别考虑</li></ol><h2 id="Method-s">Method(s)</h2><p>两个工作：</p><ol><li>通过重写KD loss，将KD拆分成TCKD与NCKD，同时通过实验证明了两个因子对性能的影响：<ul><li>TCKD迁移了有关于训练样本学习难度的知识，并且训练样本越难被学习，TCKD的价值越高：通过数据增强，噪声标签以及使用imagenet三个方法来实现对猜想的验证。</li><li>NCKD是基于logit方法能够工作的核心原因，但它的作用被压制了，NCKD在具有更高置信度的样本上能蒸馏出更有价值的知识：解耦实验，只用NCKD就可以超过student模型并且与baseline KD性能相当；将训练样本拆分为置信度高的与置信度低的两组，通过NCKD分别在两个数据集上蒸馏，发现置信度高的数据集能迁移更多知识</li></ul></li><li>基于TCKD与NCKD的拆分公式，将TCKD的权重置为超参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，NCKD的权重由teacher模型的置信度改为超参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>，从而解决高耦合的问题。</li></ol><h2 id="Evaluation">Evaluation</h2><h3 id="通过设计巧妙的实验验证所有的猜想：">通过设计巧妙的实验验证所有的猜想：</h3><p>基于TCKD与NCKD拆分后的实验效果，猜想TCKD与NCKD的作用</p><ol><li>通过降低Teacher模型的置信度，验证TCKD表示的是样本的学习难度，且越难学习的样本，TCKD越有效</li><li>通过拆分数据集，验证NCKD对具有更高置信度的样本能够迁移更多知识</li></ol><h3 id="通过对超参数的搜索验证方法的有效性">通过对超参数的搜索验证方法的有效性</h3><ol><li><p>对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mtext>、</mtext><mi>β</mi></mrow><annotation encoding="application/x-tex">\alpha、\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord cjk_fallback">、</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>分别进行超参数搜索，得出TCKD与NCKD前的权重都是有必要的，即需要对KD loss实现解耦合</p></li><li><p>主实验结果增加了别的领域（目标检测）的数据集测试</p></li></ol><h3 id="设计许多额外实验，证明方法的强大">设计许多额外实验，证明方法的强大</h3><ol><li><p>将与基于feature的方法及base lineKD作对比，DKD训练效率最高（准确率，训练时间，参数量）</p><img src="https://s2.loli.net/2024/12/05/5EiV37YzRraw8Qc.png" style="zoom:80%;" /></li><li><p>缓解大参数量的teacher模型不能很好地蒸馏的问题</p><img src="https://s2.loli.net/2024/12/05/dEGS2t41gHLDMYv.png" alt="image-20240409183849163" style="zoom:80%;" /><ol start="3"><li><p>知识迁移能力（特征迁移）</p><img src="https://s2.loli.net/2024/12/05/nF3iuvAzLE8JlRU.png" alt="image-20240409183929613" style="zoom:80%;" /></li><li><p>可视化：特征区分度，logits与teacher的差异</p><img src="https://s2.loli.net/2024/12/05/Ph9iGytEMpabLc4.png" alt="image-20240409184009644" style="zoom:80%;" /></li></ol></li></ol><h2 id="Conclusion">Conclusion</h2><p>作者给了哪些strong conclusion, 又给了哪些weak conclusion?</p><ol><li>将KD loss重写为TCKD与NCKD，两部分都会影响蒸馏效果</li><li>baseline KD loss约束了知识蒸馏的灵活性和有效性</li><li>提出了DKD方法</li><li>局限性：DKD方法不是性能最好的，DKD的超参数缺少足够研究</li></ol><h2 id="Notes">Notes</h2><ol><li>实验</li><li>超参数与样本关联而不是数据集</li></ol>]]></content>
      
      
      <categories>
          
          <category> 论文阅读 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 知识蒸馏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>merge与rebase区别，建议用rebase</title>
      <link href="/2024/04/09/merge%E4%B8%8Erebase%E5%8C%BA%E5%88%AB%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%94%A8rebase/"/>
      <url>/2024/04/09/merge%E4%B8%8Erebase%E5%8C%BA%E5%88%AB%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%94%A8rebase/</url>
      
        <content type="html"><![CDATA[<blockquote><p>git开发中，通常会存在合并分支的现象，Merge与Rebase是两种合并分支的策略，那么这两个策略的区别是什么？什么时候用什么比较好？</p></blockquote><h2 id="合并分支策略">合并分支策略</h2><h4 id="1-Merge">1. Merge</h4><p>Git 会把两个分支的修改合并到一起。如果同时在两个分支上修改了同一个文件的同一行，就会产生冲突，需要手动解决。你可以通过以下命令来设置这个策略：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config pull.rebase <span class="literal">false</span></span><br></pre></td></tr></table></figure><h4 id="2-Rebase">2. Rebase</h4><p>Git 会把你在本地分支上的修改暂时保存起来，然后把本地分支更新为远程分支的最新状态，最后再把保存起来的修改应用回去。这样可以保持提交历史的线性，但是如果两个分支有相同的修改，可能需要解决更多的冲突。你可以通过以下命令来设置这个策略：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config pull.rebase <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li><h4 id="Fast-forward-only">Fast-forward only</h4></li></ol><p>只有当本地分支可以直接快进到远程分支的状态时，Git 才会进行更新，否则就会报错。这个策略可以通过以下命令来设置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config pull.ff only</span><br></pre></td></tr></table></figure><p><strong>以上的命令只会影响当前的仓库。如果你想让所有的仓库都使用同样的策略，可以在命令中加上 <code>--global</code> 选项，例如 <code>git config --global pull.rebase true</code>。另外，在执行 <code>git pull</code> 命令时，你也可以通过命令行参数来临时指定使用哪种策略，例如 <code>git pull --rebase</code> 或 <code>git pull --no-rebase</code>。</strong></p><h2 id="图示区别">图示区别</h2><p><img src="https://s2.loli.net/2024/12/05/pBbfeAs7xiq21u3.jpg" alt="图源知乎"></p><p>图源<a href="https://zhuanlan.zhihu.com/p/75499871">知乎</a></p><h2 id="总结">总结</h2><p>如果你想要一个干净、线性的提交历史，那么使用rebase</p><p>如果你想要保持真实的提交历史，那么使用merge</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo常用命令</title>
      <link href="/2024/04/09/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/04/09/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>hexo基本功能使用记录</p></blockquote><h2 id="new">new</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new &lt;layout&gt; postName</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">简写</span></span><br><span class="line">hexo n postName</span><br></pre></td></tr></table></figure><p>新建文章，layout默认为post，如果不指定layout，则默认为post。</p><h2 id="publish">publish</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo publish postName</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">简写</span></span><br><span class="line">hexo p postName</span><br></pre></td></tr></table></figure><p>发表草稿。草稿即不显示在网页上的一些文章。</p><h2 id="server">server</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">简写</span></span><br><span class="line">hexo s</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">草稿预览</span></span><br><span class="line">hexo s --draft</span><br></pre></td></tr></table></figure><h2 id="clean">clean</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><p>清除缓存文件(db.json)和已生成的静态文件(public)。<br>在某些情况下，public文件夹中的文件没有按照预期的那样生成，可以尝试使用该命令。</p><h2 id="deploy">deploy</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy -g</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">简写</span></span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><p>将网站部署到github上，-g参数表示生成静态文件。</p><blockquote><p>更多命令参考<a href="https://hexo.io/zh-cn/docs/">Hexo官方中文文档</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
